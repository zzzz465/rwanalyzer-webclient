(function(t){function e(e){for(var i,a,c=e[0],o=e[1],u=e[2],h=0,f=[];h<c.length;h++)a=c[h],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,c=1;c<n.length;c++){var o=n[c];0!==r[o]&&(i=!1)}i&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={app:0},s=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/rwanalyzer-webclient/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"05ac":function(t,e,n){},1854:function(t,e,n){},"3ddd":function(t,e,n){"use strict";n("1854")},4580:function(t,e,n){"use strict";n("a807")},"4ec8":function(t,e,n){"use strict";n("d5af")},"7b3f":function(t,e,n){"use strict";n("cf0c")},8629:function(t,e,n){},8633:function(t,e,n){"use strict";n("dfdb")},a45c:function(t,e,n){},a807:function(t,e,n){},abd1:function(t,e,n){"use strict";n("b86f")},b86f:function(t,e,n){},c5ff:function(t,e,n){"use strict";n("a45c")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.connection.connecting,expression:"connection.connecting",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"background",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.88)","element-loading-spinner":"el-icon-loading","element-loading-text":t.connectionText,customClass:"loadingScreen"}},[n("div",{staticClass:"root"},[n("div",{staticClass:"left"},[n("Tab",{attrs:{items:t.entries},model:{value:t.currentEntry,callback:function(e){t.currentEntry=e},expression:"currentEntry"}})],1),n("div",{staticClass:"main"},[n("div",{staticClass:"content"},[n("div",{staticClass:"list border"},[n("ProfileTable",{attrs:{logManager:t.logManager,selected:t.selectedEntries},on:{rowSelected:t.rowSelected,nameSelected:t.requestRichInfo}})],1),n("div",{staticClass:"graph border"},[n("BasicChart",{attrs:{logManager:t.logManager,range:500,selection:t.selectedEntries}})],1),n("div",{staticClass:"tickGraph border"},[n("TPSChart",{attrs:{tpsLogManager:t.tpsLogManager,range:500}})],1)]),n("div",{staticClass:"optional"},[n("div",{staticClass:"information-panel"},[n("RichInfoViewer",{attrs:{richInfo:t.richInfo}})],1),n("div",{staticClass:"control-panel"}),n("div",{staticClass:"FPSTPS border"},[n("FPSTPSChart",{attrs:{logManager:t.fpstpsLogManager}})],1)])])])])},s=[],a=(n("a15b"),n("b0c0"),n("4ec9"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root-BasicChart"},[n("div",{ref:"graph",staticClass:"graph"}),n("div",{staticClass:"legend"},t._l(t.selectedKeys,(function(e){return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"color",style:"background-color: "+t.getColor(e)+";"}),n("div",{staticClass:"name"},[t._v(t._s(t.getLabel(e)))])]),n("div",{staticClass:"spacer"})])})),0)])}),c=[],o=(n("99af"),n("4de4"),n("7db0"),n("fb6a"),n("b65f"),n("a9e3"),n("b680"),n("ac1f"),n("1276"),n("b85c")),u=n("3835"),l=n("2909"),h=n("5698"),f=n("b400"),d=n("7338"),g=n("d4ec"),p=n("bee2"),v=n("c8bb"),k=n.n(v),m=(n("a4d3"),n("e01a"),n("d28b"),n("96cf"),function(){function t(e,n,i){if(Object(g["a"])(this,t),this.profileLog=e,this.chunkSize=n,n<=0)throw new Error("chunkSize is lower than 1, value: ".concat(n));this._logs=[],this.hit=0,this.time=0,this.tick=i}return Object(p["a"])(t,[{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(o["a"])(this._logs.values()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"isFull",value:function(){return this._logs.length>=this.chunkSize}},{key:"appendLog",value:function(t){if(this._logs.length>=this.chunkSize)throw new Error("LogChunk is full");this._logs.push(t),this.hit+=t.hit,this.time+=t.time}}]),t}()),y=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;Object(g["a"])(this,t),this.label=e,this.key=n,this.tickLogLimit=i,this.chunkSize=r,this._logChunks=new k.a,this._average=0,this._total=0,this._hits=0,this.queueSize=Math.floor(i/r)}return Object(p["a"])(t,[{key:"appendLog",value:function(t){var e={start:t.tick-t.tick%this.chunkSize,end:t.tick-t.tick%this.chunkSize+this.chunkSize},n=this._logChunks.peekBack();(0==this._logChunks.length||n&&n.tick.end<t.tick)&&(this.updateData(),this._logChunks.push(new m(this,this.chunkSize,e))),this._logChunks.peekBack().appendLog(t),this._logChunks.length>=this.queueSize&&this._logChunks.removeFront()}},{key:"updateData",value:function(){if(0!==this._logChunks.length){if(this._logChunks.length===this.queueSize-1){var t=this._logChunks.peekFront(),e=this._logChunks.peekBack();this._total=this._total-t.time+e.time,this._hits=this._hits-t.hit+e.hit}else{var n=this._logChunks.peekBack();this._total+=n.time,this._hits+=n.hit}this._average=this.total/this._logChunks.length*this.chunkSize}}},{key:"chunks",get:function(){return this._logChunks.toArray()}},{key:"average",get:function(){return this._average}},{key:"total",get:function(){return this._total}},{key:"hits",get:function(){return this._hits}}]),t}(),b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Object(g["a"])(this,t),this._plogs=new Map,this._currentTick=0,this._logLimit=e,this._chunkSize=n}return Object(p["a"])(t,[{key:"clearLogs",value:function(){this._plogs.clear()}},{key:"processData",value:function(t){var e=t.globalTick,n=t.tickLogs;this._currentTick=e;var i,r=Object(o["a"])(n);try{for(r.s();!(i=r.n()).done;){var s=i.value,a=this._plogs.get(s.key);a||(a=new y(s.label,s.key,this._logLimit,this.chunkSize),this._plogs.set(s.key,a)),a.appendLog(s)}}catch(c){r.e(c)}finally{r.f()}}},{key:"getLog",value:function(t){return this._plogs.get(t)}},{key:"tickRange",get:function(){return{start:this.currentTick-this._logLimit,end:this.currentTick}}},{key:"chunkRange",get:function(){return{start:Math.trunc((this.currentTick-this._logLimit)/this.chunkSize),end:Math.trunc(this.currentTick/this.chunkSize)}}},{key:"profileLogs",get:function(){return Object(l["a"])(this._plogs.values())}},{key:"currentTick",get:function(){return this._currentTick}},{key:"chunkSize",get:function(){return this._chunkSize}}]),t}();function _(t){var e,n=Object(o["a"])(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;clearInterval(i)}}catch(r){n.e(r)}finally{n.f()}return[]}var S,C=i["default"].extend({props:{logManager:{type:b,required:!0},yAxisReference:{type:String,default:"time"},range:{type:Number,default:300},selection:{type:Set,required:!0}},watch:{yAxisReference:function(){this.paths.selectAll("path").remove()}},computed:{},data:function(){var t=h["d"]("svg").attr("width",0).attr("height",0);t.node();var e=t.append("g").attr("transform","translate(1280, 100)"),n=t.append("g").attr("transform","translate(0, 700)").attr("color","white").style("font","20px times"),i=t.append("g").attr("transform","translate(50, 0)").attr("color","white").style("font","18px times"),r=t.append("g").attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round"),s=t.append("rect").style("fill","none").style("pointer-events","all").attr("width",1920).attr("height",720),a=t.append("g").append("text").style("opacity",100).attr("fill","white").attr("text-anchor","left").attr("alignment-baseline","middle"),c=t.append("circle").attr("stroke","red").attr("stroke-width","5").attr("cx","500").attr("cy","500").attr("r","8").attr("fill","#00000000");return{svg:t,xAxis:n,yAxis:i,paths:r,legend:e,rect:s,focusText:a,circle:c,mousePos:[0,0],isHover:!1,frameCounter:0,rootRectSize:[0,0],updateKeys:[],selectedKeys:[]}},mounted:function(){var t=this,e=this.svg.node(),n=this.$refs.graph;n.append(e),this.rootRectSize=[n.offsetWidth,n.offsetHeight],this.svg.attr("width",this.rootRectSize[0]).attr("height",this.rootRectSize[1]),this.rect.attr("width",this.rootRectSize[0]).attr("height",this.rootRectSize[1]),this.updateKeys=_(this.updateKeys);var i=5;this.updateKeys=[setInterval((function(){t.updateGraph()}),12.5),setInterval((function(){console.log("framerate: ".concat(t.frameCounter/i)),t.frameCounter=0}),1e3*i)],this.rect.on("mouseover",(function(e){return t.mouseover(e)})).on("mousemove",(function(e){return t.mousemove(e)})).on("mouseleave",(function(e){return t.mouseleave(e)}))},methods:{getColor:h["k"](h["l"]),updateGraph:function(){var t=this;this.selectedKeys.length!==this.selection.size&&(this.selectedKeys=Object(l["a"])(this.selection.values()));var e=Object(u["a"])(this.rootRectSize,2),n=e[0],i=e[1],r=40;this.xAxis.attr("transform","translate(".concat(0,", ",i-r/2,")")),this.yAxis.attr("transform","translate(".concat(r,", ",0,")"));var s=this.logManager,a={start:Math.trunc(s.currentTick-this.range),end:Math.trunc(s.currentTick-s.chunkSize)},c=Object(d["AsEnumerable"])(this.logManager.profileLogs).Where((function(e){return t.selection.has(e.key)})),g=c.Select((function(t){var e=Object(d["AsEnumerable"])(t.chunks).Where((function(t){return a.start<=t.tick.start&&t.tick.end<=a.end})).ToArray();return{label:t.label,key:t.key,filteredChunks:e}})).ToArray(),p=g;p.length<=0&&this.paths.selectAll("path").remove();var v=Object(d["AsEnumerable"])(g).Select((function(t){return t.filteredChunks})).SelectMany((function(t){return t})).ToArray(),k=function(){var t=[a.start,a.end];return h["j"]().domain(t).range([r,n-r])}(),m=function(){var e=h["h"](v,(function(e){return t.getYValue(e)}))||0;return h["j"]().domain([0,e]).nice().range([i-r,r])}();this.xAxis.call(h["c"](k).tickValues([])),this.yAxis.call(h["b"](m));var y=h["g"]().x((function(t,e){return k(t.tick.start)})).y((function(e){return m(t.getYValue(e))})),b=this.paths.selectAll("path").data(p,(function(t){return t.key})).join((function(e){return e.append("path").attr("stroke",(function(e){return t.getColor(e.key)})).attr("d",(function(t){return y(t.filteredChunks)}))}),(function(e){return e.attr("stroke",(function(e){return t.getColor(e.key)})).attr("d",(function(t){return y(t.filteredChunks)}))}),(function(t){return t.remove()}));this.isHover&&function(){var e,n=t.mousePos[0],i=t.mousePos[1],r=k.invert(n),s=m.invert(i),a=[],c=Object(o["a"])(g);try{for(c.s();!(e=c.n()).done;){var u=e.value,l=u.filteredChunks.find((function(t){return t.tick.start<=r&&r<=t.tick.end}));l&&a.push({profileLog:u,selectedChunk:l})}}catch(d){c.e(d)}finally{c.f()}var h=f["a"](a,(function(e){return Math.abs(s-t.getYValue(e.selectedChunk))}));h&&(b.attr("stroke",(function(t){return t.key===h.profileLog.key?"#ff0000":"#ffffff1f"})).filter((function(t){return t.key===h.profileLog.key})).raise(),t.circle.attr("cx",k(h.selectedChunk.tick.start)).attr("cy",m(t.getYValue(h.selectedChunk))),t.focusText.attr("opacity",100).attr("transform","translate(".concat(t.mousePos[0]+10,", ").concat(t.mousePos[1]-10,")")).text("call: ".concat(h.selectedChunk.hit," time: ").concat(h.selectedChunk.time.toFixed(3))))}(),this.frameCounter++},getYValue:function(t){return"hit"===this.yAxisReference?t.hit:t.time},mouseover:function(t){this.isHover=!0},mousemove:function(t){this.mousePos=h["i"](t)},mouseleave:function(t){this.isHover=!1},getLabel:function(t){var e,n=null===(e=this.logManager.getLog(t))||void 0===e?void 0:e.label;return n?n.split(".").slice(-1)[0]:"ERROR"}}}),x=C,w=(n("3ddd"),n("2877")),L=Object(w["a"])(x,a,c,!1,null,"dce809dc",null),T=L.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabs"},t._l(t.items.entries(),(function(e){var i=e[0],r=e[1];return n("div",[n("Tab",{staticClass:"tab",attrs:{name:i,set:r,currentEntry:t.currentEntry},on:{entrySelected:t.onEntrySelected}})],1)})),0)},j=[],z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root text"},[n("div",{staticClass:"title"},[n("h2",[t._v(t._s(t.name))])]),n("div",{staticClass:"scroll"},t._l(t.entries,(function(e){return n("div",{staticClass:"entries",on:{click:function(n){return t.entrySelected(e)}}},[n("div",{staticClass:"entry",class:{selected:t.currentEntry===e}},[n("button",{attrs:{block:""}},[t._v(t._s(e))])]),n("div",{staticClass:"divider"})])})),0)])},R=[],E=i["default"].extend({model:{prop:"currentEntry",event:"entrySelected"},props:{name:{type:String,required:!0},set:{type:Set,required:!0},currentEntry:{type:String,required:!0}},computed:{entries:function(){var t=Object(l["a"])(this.set.values());return t}},mounted:function(){},methods:{entrySelected:function(t){this.$emit("entrySelected",t)}}}),M=E,A=(n("8633"),Object(w["a"])(M,z,R,!1,null,"37404fb2",null)),P=A.exports,q=i["default"].extend({components:{Tab:P},model:{prop:"currentEntry",event:"entrySelected"},props:{items:{type:Map,required:!0},currentEntry:{type:String,required:!0}},watch:{},methods:{onEntrySelected:function(t){this.$emit("entrySelected",t)}}}),I=q,N=(n("4ec8"),Object(w["a"])(I,O,j,!1,null,"00ac3e5c",null)),F=N.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root-ProfileTable"},[n("div",{staticClass:"table"},[t._m(0),n("div",{staticClass:"divider"}),n("div",{staticClass:"content"},t._l(t.profileLogs,(function(e){return n("div",[n("div",{staticClass:"row",class:{selected:t.selected.has(e.key)}},[n("div",{staticClass:"col check-box click",class:{"el-icon-check":t.selected.has(e.key)},on:{click:function(n){return t.onClickRow(e)}}}),n("div",{staticClass:"col average"},[t._v(t._s(t._f("number")(e.average)))]),n("div",{staticClass:"col percent"},[t._v("NULL")]),n("div",{staticClass:"col total"},[t._v(t._s(t._f("number")(e.total)))]),n("div",{staticClass:"col hits"},[t._v(t._s(e.hits))]),n("div",{staticClass:"col large-col click",on:{click:function(n){return t.onNameSelected(e)}}},[t._v(t._s(e.label))])]),n("div",{staticClass:"divider"})])})),0)])])},K=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"col check-box el-icon-check"}),n("div",{staticClass:"col"},[t._v("Average")]),n("div",{staticClass:"col"},[t._v("Percent")]),n("div",{staticClass:"col"},[t._v("Total")]),n("div",{staticClass:"col"},[t._v("Hits")]),n("div",{staticClass:"col large-col"},[t._v("Name")])])}],W=(n("25f0"),i["default"].extend({props:{logManager:{type:b,required:!0},selected:{type:Set,required:!0}},computed:{},filters:{number:function(t){return t.toFixed(3).toString()+"ms"}},data:function(){return{profileLogs:[],updateKeys:[]}},mounted:function(){var t=this;_(this.updateKeys),this.updateKeys=[setInterval((function(){t.updateValues()}),100)]},methods:{updateValues:function(){this.profileLogs=this.logManager.profileLogs.sort((function(t){return t.average}))},onNameSelected:function(t){this.$emit("nameSelected",t)},onClickRow:function(t){this.$emit("rowSelected",t)}}})),V=W,D=(n("c5ff"),Object(w["a"])(V,$,K,!1,null,"17941b55",null)),G=D.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"graph",staticClass:"graph"})},H=[],Y=(n("13d5"),function(){function t(e,n){Object(g["a"])(this,t),this.tickRange=e,this.chunkSize=n,this._timeSum=0,this._percentage=0,this._timeSumOfWatchedLogs=0,this._tpsLogs=[]}return Object(p["a"])(t,[{key:"appendLog",value:function(t){this._tpsLogs.push(t),this._timeSum+=t.totalTime,this._timeSumOfWatchedLogs+=t.totalTimeOfWatchedLogs,this._percentage=this.timeSumOfWatchedLogs/this.timeSum}},{key:"tpsLogs",get:function(){return this._tpsLogs}},{key:"timeSum",get:function(){return this._timeSum}},{key:"timeSumOfWatchedLogs",get:function(){return this._timeSumOfWatchedLogs}},{key:"percentage",get:function(){return this._percentage}},{key:"isFull",get:function(){return this._tpsLogs.length===this.chunkSize}}]),t}()),J=function(){function t(e,n){Object(g["a"])(this,t),this.logLimit=e,this.chunkSize=n,this._logChunks=new k.a,this.queueSize=Math.trunc(e/n),this._currentTick=0}return Object(p["a"])(t,[{key:"processData",value:function(t){var e=t.globalTick,n=t.tickLogs,i=t.totalTime;this._currentTick=e;var r=n.reduce((function(t,e){return t+e.time}),0),s=this._logChunks.peekBack();if(!s||s.isFull){var a={start:e-e%this.chunkSize,end:e-e%this.chunkSize+this.chunkSize};s=new Y(a,this.chunkSize),this._logChunks.push(s),this._logChunks.length>=this.queueSize&&this._logChunks.dequeue()}s.appendLog({tick:e,totalTime:i,totalTimeOfWatchedLogs:r})}},{key:"clearLogs",value:function(){this._logChunks.clear()}},{key:"logChunks",get:function(){return this._logChunks.toArray()}},{key:"currentTick",get:function(){return this._currentTick}}]),t}(),U=i["default"].extend({props:{tpsLogManager:{type:J,required:!0},range:{type:Number,default:300}},data:function(){var t=h["d"]("svg").attr("width",0).attr("height",0),e=t.append("g").attr("color","white").style("font","20px times"),n=t.append("g").attr("color","white").attr("font","18px times"),i=t.append("path").attr("class","tpsPath"),r=t.append("path").attr("class","area"),s=t.append("defs");s.append("linearGradient").attr("id","area_gradient").attr("gradientUnits","userSpaceOnUse").attr("x1","0").attr("x2","0").attr("y1","100").attr("y2","0").selectAll("stop").data([{offset:"0",color:"green"},{offset:"100",color:"red"}]).enter().append("stop").attr("offset",(function(t){return t.offset})).attr("stop-color",(function(t){return t.color}));return{svg:t,xAxis:e,yAxis:n,tpsPath:i,area:r,rootRectSize:[0,0],updateKeys:[]}},mounted:function(){var t=this,e=this.svg.node(),n=this.$refs.graph;n.append(e),this.rootRectSize=[n.offsetWidth,n.offsetHeight],this.svg.attr("width",this.rootRectSize[0]).attr("height",this.rootRectSize[1]),console.log("rect size: ".concat(this.rootRectSize)),_(this.updateKeys),this.updateKeys=[setInterval((function(){t.updateGraph()}),12.5)]},methods:{updateGraph:function(){var t={start:this.tpsLogManager.currentTick-this.range,end:this.tpsLogManager.currentTick},e=Object(d["AsEnumerable"])(this.tpsLogManager.logChunks).Where((function(e){return t.start<=e.tickRange.start&&e.tickRange.end<=t.end})).ToArray(),n=Object(u["a"])(this.rootRectSize,2),i=n[0],r=n[1],s=40;if(this.xAxis.attr("transform","translate(".concat(0,", ",r-s/2,")")),this.yAxis.attr("transform","translate(".concat(s,", ",0,")")),e.length<=0)this.tpsPath.selectAll("path").remove();else{var a=h["j"]().domain([t.start,t.end]).range([s,i-s]),c=h["j"]().domain([0,1]).nice().range([r-s,s]);this.xAxis.call(h["c"](a).tickValues([])),this.yAxis.call(h["b"](c).ticks(1));var o=h["a"]().x((function(t){return a(t.tickRange.start)})).y0(c(0)).y1((function(t){return c(t.percentage)})),l=h["g"]().x((function(t){return a(t.tickRange.start)})).y((function(t){return c(t.percentage)}));this.tpsPath.attr("d",l(e)),this.area.attr("d",o(e))}}}}),Q=U,X=(n("abd1"),Object(w["a"])(Q,B,H,!1,null,"d438c0fe",null)),Z=X.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"root",staticClass:"root-FPSTPSChart"})},et=[],nt=(n("8ba4"),function(){function t(){Object(g["a"])(this,t),this._queue=new k.a,this._queueSize=10}return Object(p["a"])(t,[{key:"appendLog",value:function(t){this._queue.push(t),this.omitExcessLog()}},{key:"omitExcessLog",value:function(){while(this._queue.length>this.queueSize)this._queue.dequeue()}},{key:"queueSize",get:function(){return this._queueSize},set:function(t){this._queueSize=t,this.omitExcessLog()}},{key:"logs",get:function(){return this._queue.toArray()}}]),t}()),it=i["default"].extend({props:{logManager:{type:nt,required:!0}},computed:{},data:function(){var t=h["d"]("svg").attr("width",10).attr("height",10),e=t.append("g"),n=t.append("g"),i=t.append("path").attr("fill","none").attr("stroke","#FF0000"),r=t.append("path").attr("fill","none").attr("stroke","#FFFFFF");return{svg:t,xAxis:e,yAxis:n,tpsPath:r,targetTPSLine:i,rootRectSize:[0,0],updateKeys:[]}},mounted:function(){var t=this,e=this.$refs.root;e.append(this.svg.node()),this.rootRectSize=[e.offsetWidth,e.offsetHeight],this.svg.attr("width",this.rootRectSize[0]).attr("height",this.rootRectSize[1]),_(this.updateKeys),this.updateKeys=[setInterval((function(){t.updateGraph()}),100)]},methods:{updateGraph:function(){var t=Object(u["a"])(this.rootRectSize,2),e=t[0],n=t[1],i=40;this.xAxis.attr("transform","translate(".concat(0,", ",n-i/2,")")),this.yAxis.attr("transform","translate(".concat(i,", ",0,")"));var r=this.logManager,s=r.logs;if(!(s.length<=0)){var a=s[s.length-1].tpsTarget,c=Math.trunc(1.2*h["h"](s,(function(t){return t.tpsTarget}))),o=h["j"]().domain([0,s.length-1]).range([i,e-i]),l=h["j"]().domain([0,c]).range([n-i,i]);this.xAxis.call(h["c"](o).tickValues(o.ticks().filter(Number.isInteger)).tickFormat((function(t){return h["f"]("d")(s.length-t.valueOf())}))),this.yAxis.call(h["b"](l));var f=h["g"]().curve(h["e"]).x((function(t,e){return o(e)})).y((function(t){return l(t.tps)}));this.tpsPath.attr("d",f(s));var d=h["g"]().x((function(t){return o(t[0])})).y((function(t){return l(t[1])}));this.targetTPSLine.attr("d",d([[0,a],[s.length-1,a]]))}}}}),rt=it,st=(n("4580"),Object(w["a"])(rt,tt,et,!1,null,"8681ef98",null)),at=st.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root-RichInfoViewer"},[n("h1",{staticClass:"names modName"},[t._v(t._s(t.modName))]),n("h4",{staticClass:"names typeName"},[t._v(t._s(t.typeName))]),n("h2",{staticClass:"names methodName"},[t._v(t._s(t.methodName))]),n("h5",{staticClass:"names assemblyName"},[t._v(t._s(t.assemblyName))]),n("h5",{staticClass:"names patchType"},[t._v(t._s(t.patchType))]),n("div",{staticClass:"patches"})])},ot=[],ut=i["default"].extend({props:{richInfo:{type:Object,required:!0}},computed:{modName:function(){return this.richInfo.modName},typeName:function(){return this.richInfo.typeName},methodName:function(){return this.richInfo.methodName},assemblyName:function(){return this.richInfo.assemblyName},patchType:function(){return this.richInfo.patchType}},methods:{}}),lt=ut,ht=(n("7b3f"),Object(w["a"])(lt,ct,ot,!1,null,"250749f2",null)),ft=ht.exports;(function(t){t["LogData"]="LogData",t["InitEntries"]="InitEntries",t["EntryAdded"]="EntryAdded",t["EntrySwapped"]="EntrySwapped",t["toggleTickState"]="ToggleGameState",t["FPSTPS"]="FPSTPS",t["RichInfoRequest"]="RichInfoRequest",t["RichInfoRespond"]="RichInfoRespond"})(S||(S={}));var dt=function(){function t(){Object(g["a"])(this,t),this._status="connecting",this.webSocket=void 0,this.reconnect()}return Object(p["a"])(t,[{key:"sendMessage",value:function(t){this.webSocket.send(JSON.stringify(t))}},{key:"reconnect",value:function(){var t=this;this.webSocket=new WebSocket("ws://localhost:4000/rw_analyzer"),this._status="connecting",this.webSocket.onopen=function(){return t._status="connected"},this.webSocket.onmessage=function(e){var n,i=JSON.parse(e.data);null===(n=t.onDataReceive)||void 0===n||n.call(t,i)},this.webSocket.onclose=function(){return t._status="disconnected"}}},{key:"status",get:function(){return this._status}}]),t}(),gt=i["default"].extend({components:{BasicChart:T,TPSChart:Z,Tab:F,ProfileTable:G,FPSTPSChart:at,RichInfoViewer:ft},data:function(){var t=1e3,e=3,n=new b(t,e),i=new J(t,e),r=new dt,s=new nt,a=new Set,c={logManager:n,tpsLogManager:i,fpstpsLogManager:s,tick:0,tabs:new Map,currentEntry:"",entries:new Map,logs:[],yAxisReference:"avgTime",socketClient:r,richInfo:{},selectedEntries:a,connection:{connecting:!0,retryCount:0}};return r.onDataReceive=function(t){switch(t.type){case S.LogData:n.processData(t),i.processData(t);break;case S.InitEntries:var e=Object(d["AsEnumerable"])(t.entries).GroupBy((function(t){return t.category}),(function(t){return t.name})).ToMap((function(t){return t.key}),(function(t){return new Set(t)}));c.entries=e;break;case S.EntryAdded:break;case S.EntrySwapped:c.currentEntry=t.entryName,a.clear(),n.clearLogs(),i.clearLogs();break;case S.FPSTPS:s.appendLog(t);break;case S.RichInfoRespond:c.richInfo=t.Data;break}},c},watch:{"socketClient._status":function(t){switch(t){case"connected":this.connection.connecting=!1,this.connection.retryCount=-1,this.$notify({title:"Connected",message:"connected to localhost:4000 local rimworld server",position:"bottom-right",showClose:!1});break;case"connecting":this.connection.connecting=!0;break;case"disconnected":this.connection.connecting=!1,this.connection.retryCount+=1,this.socketClient.reconnect();break}},currentEntry:function(t){this.socketClient.sendMessage({type:S.EntrySwapped,entryName:t})}},computed:{connectionText:function(){var t=["connecting to local server..."];return this.connection.retryCount>0&&t.push("retry count: ".concat(this.connection.retryCount)),t.join("\n")}},mounted:function(){},methods:{toggleTick:function(){this.socketClient.sendMessage({type:S.toggleTickState})},requestRichInfo:function(t){this.socketClient.sendMessage({type:S.RichInfoRequest,key:t.key})},rowSelected:function(t){var e=this.selectedEntries;e.has(t.key)?e.delete(t.key):e.add(t.key)}}}),pt=gt,vt=(n("d2d5"),n("dee3"),Object(w["a"])(pt,r,s,!1,null,"90179ff8",null)),kt=vt.exports,mt=n("ce5b"),yt=n.n(mt),bt=(n("bf40"),n("0fae"),n("5c96")),_t=n.n(bt);i["default"].config.productionTip=!1,i["default"].use(yt.a),i["default"].use(_t.a);var St={};new i["default"]({vuetify:new yt.a(St),render:function(t){return t(kt)}}).$mount("#app")},cf0c:function(t,e,n){},d2d5:function(t,e,n){"use strict";n("05ac")},d5af:function(t,e,n){},dee3:function(t,e,n){"use strict";n("8629")},dfdb:function(t,e,n){}});
//# sourceMappingURL=app.bf7e8b0f.js.map