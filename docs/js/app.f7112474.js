(function(t){function e(e){for(var r,s,o=e[0],c=e[1],u=e[2],h=0,f=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&f.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={app:0},a=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"11ae":function(t,e,n){"use strict";n("5a75")},3352:function(t,e,n){},3811:function(t,e,n){"use strict";n("3352")},"547d":function(t,e,n){},"5a75":function(t,e,n){},"6d42":function(t,e,n){"use strict";n("547d")},"92f6":function(t,e,n){},bc77:function(t,e,n){"use strict";n("92f6")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"background"},[n("div",{staticClass:"root"},[n("div",{staticClass:"left"}),n("div",{staticClass:"main"},[n("div",{staticClass:"content"},[n("div",{staticClass:"list border"}),n("div",{staticClass:"graph border"},[n("BasicChart",{attrs:{logManager:t.logManager,range:500}})],1),n("div",{staticClass:"tickGraph border"},[n("TPSChart",{attrs:{tpsLogManager:t.tpsLogManager}})],1)]),n("div",{staticClass:"optional"})])])])},s=[],o=(n("b0c0"),n("4ec9"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"graph",staticClass:"graph"})}),c=[],u=(n("4de4"),n("7db0"),n("a15b"),n("d81d"),n("b65f"),n("a9e3"),n("b85c")),l=n("3835"),h=n("5698"),f=n("b400"),d=n("7338"),p=n("2909"),g=n("d4ec"),k=n("bee2"),v=n("c8bb"),m=n.n(v),y=(n("a4d3"),n("e01a"),n("d28b"),n("96cf"),function(){function t(e,n,r){if(Object(g["a"])(this,t),this.profileLog=e,this.chunkSize=n,n<=0)throw new Error("chunkSize is lower than 1, value: ".concat(n));this._logs=[],this.hit=0,this.time=0,this.tick=r}return Object(k["a"])(t,[{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(u["a"])(this._logs.values()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return r=n.value,t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"isFull",value:function(){return this._logs.length>=this.chunkSize}},{key:"appendLog",value:function(t){if(this._logs.length>=this.chunkSize)throw new Error("LogChunk is full");this._logs.push(t),this.hit+=t.hit,this.time+=t.time}}]),t}()),b=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;Object(g["a"])(this,t),this.label=e,this.key=n,this.tickLogLimit=r,this.chunkSize=i,this._tickLogs=[],this.queueSize=r/i,this._logChunks=new m.a}return Object(k["a"])(t,[{key:"appendLog",value:function(t){var e={start:t.tick-t.tick%this.chunkSize,end:t.tick-t.tick%this.chunkSize+this.chunkSize},n=this._logChunks.peekBack();(0==this._logChunks.length||n&&n.tick.end<t.tick)&&this._logChunks.push(new y(this,this.chunkSize,e)),this._logChunks.peekBack().appendLog(t),this._logChunks.length>=this.queueSize&&this._logChunks.removeFront()}},{key:"chunks",get:function(){return this._logChunks.toArray()}}]),t}(),S=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Object(g["a"])(this,t),this._plogs=new Map,this._currentTick=0,this._logLimit=e,this._chunkSize=n}return Object(k["a"])(t,[{key:"clearLogs",value:function(){this._plogs.clear()}},{key:"processData",value:function(t){var e=t.globalTick,n=t.tickLogs;this._currentTick=e;var r,i=Object(u["a"])(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=this._plogs.get(a.key);s||(s=new b(a.label,a.key,this._logLimit,this.chunkSize),this._plogs.set(a.key,s)),s.appendLog(a)}}catch(o){i.e(o)}finally{i.f()}}},{key:"tickRange",get:function(){return{start:this.currentTick-this._logLimit,end:this.currentTick}}},{key:"chunkRange",get:function(){return{start:Math.trunc((this.currentTick-this._logLimit)/this.chunkSize),end:Math.trunc(this.currentTick/this.chunkSize)}}},{key:"profileLogs",get:function(){return Object(p["a"])(this._plogs.values())}},{key:"currentTick",get:function(){return this._currentTick}},{key:"chunkSize",get:function(){return this._chunkSize}}]),t}(),_=i["default"].extend({props:{logManager:{type:S,required:!0},yAxisReference:{type:String,default:"time"},range:{type:Number,default:300}},watch:{yAxisReference:function(){this.paths.selectAll("path").remove()}},computed:{},data:function(){var t=h["c"]("svg").attr("width",0).attr("height",0);t.node();var e=t.append("g").attr("transform","translate(1280, 100)"),n=t.append("g").attr("transform","translate(0, 700)").attr("color","white").style("font","20px times"),r=t.append("g").attr("transform","translate(50, 0)").attr("color","white").style("font","18px times"),i=t.append("g").attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round"),a=t.append("rect").style("fill","none").style("pointer-events","all").attr("width",1920).attr("height",720),s=t.append("g").append("text").style("opacity",0).attr("text-anchor","left").attr("alignment-baseline","middle"),o=t.append("circle").attr("stroke","red").attr("stroke-width","5").attr("cx","500").attr("cy","500").attr("r","8").attr("fill","#00000000");return{svg:t,xAxis:n,yAxis:r,paths:i,legend:e,rect:a,focusText:s,circle:o,mousePos:[0,0],isHover:!1,frameCounter:0,rootRectSize:[0,0]}},mounted:function(){var t=this,e=this.svg.node(),n=this.$refs.graph;n.append(e),this.rootRectSize=[n.offsetWidth,n.offsetHeight],this.svg.attr("width",this.rootRectSize[0]).attr("height",this.rootRectSize[1]),setInterval((function(){t.updateGraph()}),12.5);var r=5;setInterval((function(){console.log("framerate: ".concat(t.frameCounter/r)),t.frameCounter=0}),1e3*r),this.rect.on("mouseover",(function(e){return t.mouseover(e)})).on("mousemove",(function(e){return t.mousemove(e)})).on("mouseleave",(function(e){return t.mouseleave(e)}))},methods:{getColor:h["h"](h["i"]),updateGraph:function(){var t=this,e=Object(l["a"])(this.rootRectSize,2),n=e[0],r=e[1],i=40;this.xAxis.attr("transform","translate(".concat(0,", ",r-i/2,")")),this.yAxis.attr("transform","translate(".concat(i,", ",0,")"));var a=this.logManager,s={start:Math.trunc(a.currentTick-this.range),end:Math.trunc(a.currentTick-a.chunkSize)},o=this.logManager.profileLogs.map((function(t){var e=Object(d["AsEnumerable"])(t.chunks).Where((function(t){return s.start<=t.tick.start&&t.tick.end<=s.end})).ToArray();return{label:t.label,key:t.key,filteredChunks:e}})),c=o;if(c.length<=0)this.paths.selectAll("path").remove();else{var p=Object(d["AsEnumerable"])(o).Select((function(t){return t.filteredChunks})).SelectMany((function(t){return t})).ToArray(),g=function(){var t=[s.start,s.end];return h["g"]().domain(t).range([i,n-i])}(),k=function(){var e=h["e"](p,(function(e){return t.getYValue(e)}))||0;return h["g"]().domain([0,e]).nice().range([r-i,i])}();this.xAxis.call(h["b"](g)),this.yAxis.call(h["a"](k));var v=h["d"]().x((function(t,e){return g(t.tick.start)})).y((function(e){return k(t.getYValue(e))})),m=this.paths.selectAll("path").data(c,(function(t){return t.key})).join((function(e){return e.append("path").attr("stroke",(function(e){return t.getColor(e.key)})).attr("d",(function(t){return v(t.filteredChunks)}))}),(function(e){return e.attr("stroke",(function(e){return t.getColor(e.key)})).attr("d",(function(t){return v(t.filteredChunks)}))}),(function(t){return t.remove()}));this.isHover&&function(){var e,n=t.mousePos[0],r=t.mousePos[1],i=g.invert(n),a=k.invert(r),s=[],c=Object(u["a"])(o);try{for(c.s();!(e=c.n()).done;){var l=e.value,h=l.filteredChunks.find((function(t){return t.tick.start<=i&&i<=t.tick.end}));h&&s.push({profileLog:l,selectedChunk:h})}}catch(p){c.e(p)}finally{c.f()}var d=f["a"](s,(function(e){return Math.abs(a-t.getYValue(e.selectedChunk))}));d&&(m.attr("stroke",(function(t){return t.key===d.profileLog.key?"#ff0000":"#ffffff1f"})).filter((function(t){return t.key===d.profileLog.key})).raise(),t.circle.attr("cx",g(d.selectedChunk.tick.start)).attr("cy",k(t.getYValue(d.selectedChunk))))}(),this.frameCounter++}},getYValue:function(t){return"hit"===this.yAxisReference?t.hit:t.time},mouseover:function(t){this.isHover=!0},mousemove:function(t){this.mousePos=h["f"](t)},mouseleave:function(t){this.isHover=!1}}}),w=_,C=(n("11ae"),n("2877")),x=Object(C["a"])(w,o,c,!1,null,"cb36f746",null),O=x.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabs"},t._l(t.items.entries(),(function(e){var r=e[0],i=e[1];return n("div",[n("Tab",{attrs:{name:r,set:i,currentEntry:t.currentEntry}})],1)})),0)},j=[],z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("div",{staticClass:"title"},[n("h2",[t._v(t._s(t.name))])]),n("div",{staticClass:"scroll"},t._l(t.entries,(function(e){return n("div",{staticClass:"entries"},[e===t.currentEntry?n("v-btn",{staticClass:"selected",attrs:{block:""}},[t._v(t._s(e))]):n("v-btn",{attrs:{block:""}},[t._v(t._s(e))])],1)})),0)])},T=[],M=i["default"].extend({props:{name:{type:String,required:!0},set:{type:Set,required:!0},currentEntry:{type:String,required:!0}},computed:{entries:function(){var t=Object(p["a"])(this.set.values());return t}},mounted:function(){console.log(this.name),console.log(this.set)},watch:{}}),E=M,A=(n("6d42"),Object(C["a"])(E,z,T,!1,null,"7bac39fe",null)),R=A.exports,P=i["default"].extend({components:{Tab:R},props:{items:{type:Map,required:!0,default:function(){return new Map}},currentEntry:{type:String,required:!0}},watch:{items:function(){console.log("watched")}},mounted:function(){},methods:{}}),q=P,W=(n("bc77"),Object(C["a"])(q,L,j,!1,null,null,null)),D=W.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"graph",staticClass:"graph"})},G=[],H=(n("13d5"),function(){function t(e,n){Object(g["a"])(this,t),this.tickRange=e,this.chunkSize=n,this._timeSum=0,this._avgTps=0,this._timeSumOfWatchedLogs=0,this._tpsLogs=[]}return Object(k["a"])(t,[{key:"appendLog",value:function(t){this._tpsLogs.push(t),this._timeSum+=t.totalTime,this._timeSumOfWatchedLogs+=t.totalTimeOfWatchedLogs}},{key:"tpsLogs",get:function(){return this._tpsLogs}},{key:"timeSum",get:function(){return this._timeSum}},{key:"timeSumOfWatchedLogs",get:function(){return this._timeSumOfWatchedLogs}},{key:"avgTps",get:function(){return this._avgTps}},{key:"isFull",get:function(){return this._tpsLogs.length===this.chunkSize}}]),t}()),I=function(){function t(e,n){Object(g["a"])(this,t),this.logLimit=e,this.chunkSize=n,this._logChunks=new m.a,this.queueSize=Math.trunc(e/n)}return Object(k["a"])(t,[{key:"processData",value:function(t){var e=t.globalTick,n=t.tickLogs,r=t.totalTime,i=n.reduce((function(t,e){return t+e.time}),0),a=this._logChunks.pop();if(!a||a.isFull){var s={start:e-e%this.chunkSize,end:e-e%this.chunkSize+this.chunkSize};a=new H(s,this.chunkSize),this._logChunks.length>=this.queueSize&&this._logChunks.dequeue()}a.appendLog({tick:e,totalTime:r,totalTimeOfWatchedLogs:i})}}]),t}(),B=i["default"].extend({props:{tpsLogManager:{type:I,required:!0},range:{type:Number,default:300}},data:function(){var t=h["c"]("svg").attr("width",0).attr("height",0),e=t.append("g").attr("color","white").style("font","20px times"),n=t.append("g").attr("color","white").attr("font","18px times"),r=t.append("g").attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round");return{svg:t,xAxis:e,yAxis:n,tpsPath:r,rootRectSize:[0,0]}},mounted:function(){var t=this,e=this.svg.node(),n=this.$refs.graph;n.append(e),this.rootRectSize=[n.offsetWidth,n.offsetHeight],this.svg.attr("width",this.rootRectSize[0]).attr("height",this.rootRectSize[1]),setInterval((function(){t.updateGraph()}),12.5)},methods:{updateGraph:function(){}}}),N=B,V=Object(C["a"])(N,$,G,!1,null,"11b13b10",null),Y=V.exports;(function(t){t["LogData"]="LogData",t["InitEntries"]="InitEntries",t["EntryAdded"]="EntryAdded",t["EntrySwapped"]="EntrySwapped",t["toggleTickState"]="ToggleGameState"})(r||(r={}));var F=function(){function t(){var e=this;Object(g["a"])(this,t),this.webSocket=new WebSocket("ws://localhost:4000/rw_analyzer"),this.webSocket.onmessage=function(t){var n,r=JSON.parse(t.data);null===(n=e.onDataReceive)||void 0===n||n.call(e,r)}}return Object(k["a"])(t,[{key:"sendMessage",value:function(t){this.webSocket.send(JSON.stringify(t))}}]),t}(),J=i["default"].extend({components:{BasicChart:O,TPSChart:Y,Tab:D},data:function(){var t=1e3,e=3,n=new S(t,e),i=new I(t,e),a=new F,s=a,o={logManager:n,tpsLogManager:i,tick:0,tabs:new Map,currentEntry:"",logs:[],yAxisReference:"avgTime",dataReceiver:s};return s.onDataReceive=function(t){switch(t.type){case r.LogData:n.processData(t),i.processData(t);break;case r.InitEntries:Object(d["AsEnumerable"])(t.entries).GroupBy((function(t){return t.category}),(function(t){return t.name})).ToMap((function(t){return t.key}),(function(t){return new Set(t)}));break;case r.EntryAdded:break;case r.EntrySwapped:o.currentEntry=t.entryName;break}},o},computed:{},mounted:function(){},methods:{toggleTick:function(){this.dataReceiver.sendMessage({type:r.toggleTickState})}}}),K=J,Q=(n("3811"),Object(C["a"])(K,a,s,!1,null,"4286ed40",null)),U=Q.exports,X=n("ce5b"),Z=n.n(X);n("bf40");i["default"].config.productionTip=!1,i["default"].use(Z.a);var tt={};new i["default"]({vuetify:new Z.a(tt),render:function(t){return t(U)}}).$mount("#app")}});
//# sourceMappingURL=app.f7112474.js.map